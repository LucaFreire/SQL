-- USE ESCOLA_VIRTUAL

-- TABLES --
CREATE TABLE CURSO
(
    ID INT IDENTITY(1,1)  PRIMARY KEY,
    NOME VARCHAR(100) NOT NULL,
    VALOR MONEY DEFAULT 200
)

CREATE TABLE PROFESSOR
(
    ID INT IDENTITY(1,1)  PRIMARY KEY,
    NOME VARCHAR(100) NOT NULL,
    CPF VARCHAR(12) NOT NULL
)

CREATE TABLE ALUNO
(
    ID INT IDENTITY(1,1)  PRIMARY KEY,
    NOME VARCHAR(100) NOT NULL,
    DT_NASCIMENTO DATE NOT NULL,
    CPF VARCHAR(12) NOT NULL,
    CHECK(DT_NASCIMENTO > '01/01/1922')
)

CREATE TABLE TURMA
(
    ID INT IDENTITY(1,1)  PRIMARY KEY,
    ID_CURSO INT FOREIGN KEY REFERENCES CURSO(ID),
    DATA_INICIO DATE NOT NULL,
    DATA_FIM DATE NOT NULL,
    ID_PROFESSOR INT FOREIGN KEY REFERENCES PROFESSOR(ID),
)

CREATE TABLE ALUNO_TURMA
(
    ID INT IDENTITY(1,1)  PRIMARY KEY,
    ID_TURMA INT FOREIGN KEY REFERENCES TURMA(ID),
    ID_ALUNO INT FOREIGN KEY REFERENCES ALUNO(ID),
)


-- ALTERS --
ALTER TABLE ALUNO
ADD ATIVO BIT DEFAULT 1

ALTER TABLE PROFESSOR
ADD ATIVO BIT DEFAULT 1

ALTER TABLE ALUNO
ADD CIDADE VARCHAR(100) 

ALTER TABLE PROFESSOR
ADD CIDADE VARCHAR(100)  


-- INSERTS --
INSERT INTO CURSO(NOME,VALOR) 
VALUES
    ('Curso C# THIGAS', 400),
    ('Curso DONZIN', 450),
    ('Curso FALAS', 100),
    ('Curso DEDELAS', 50)
    
INSERT INTO CURSO(NOME) 
VALUES
    ('CURSO BRUNELAS'),
    ('CURSO FORTUNAS')
    
INSERT INTO PROFESSOR(NOME, CPF, CIDADE) 
VALUES
    ('THIGAS', '1','Curitiba'),
    ('DONZIN', '2','Curitiba'),
    ('FALAS', '3','Curitiba'),
    ('DEDELAS', '4', 'Curitiba'),
    ('GABU', '5','Curitiba'),
    ('HEMERSHOW', '6','Curitiba')

INSERT INTO ALUNO(NOME, CPF, CIDADE, DT_NASCIMENTO) 
VALUES
    ('MAITE', '7','Curitiba', '10/10/2010'),
    ('LUSQUINHA', '8','Curitiba', '10/10/2009'),
    ('PITCH', '9','Curitiba', '10/08/2009'),
    ('RAMIREZ', '10', 'Curitiba', '10/10/2000'),
    ('MANU', '11','Curitiba', '10/10/2001'),
    ('MURILOVE', '12','Curitiba', '10/10/2002'),
    ('NICOLZIN', '13','Curitiba', '10/10/2003'),
    ('FELIPOLAS', '14','Curitiba', '10/10/2004'),
    ('CARIOCA', '15', 'Curitiba', '10/10/2005'),
    ('QUEILA', '16','Curitiba', '10/10/2006'),
    ('J√ÉO', '17','Curitiba', '10/10/2007')

INSERT INTO TURMA
(
    ID_CURSO,
    ID_PROFESSOR,
    DATA_INICIO,
    DATA_FIM
)
VALUES
    (1, 1, '01/01/2000', '01/01/2001'),
    (2, 2, '01/01/2000', '01/01/2002'),
    (3, 3, '01/01/2000', '01/01/2003'),
    (4, 4, '01/01/2000', '01/01/2004'),
    (5, 5, '01/01/2000', '01/01/2005');

INSERT INTO ALUNO_TURMA
(
    ID_ALUNO,
    ID_TURMA
)
VALUES
    (11,1),
    (2,3),
    (3,2),
    (4,1),
    (5,5),
    (6,1),
    (7,2),
    (8,3),
    (9,4),
    (10,2),
    (11,3),
    (2,4),
    (3,2),
    (4,3),
    (5,2),
    (6,4),
    (7,5),
    (8,5),
    (9,5),
    (10,3);

